<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>

    <script>
      function calculateScore() {
        // Получаем значения из полей формы
        const walkthroughTime =
          parseInt(document.getElementById("walkthroughHours").value) +
          parseInt(document.getElementById("walkthroughMins").value) / 60;
        const difficultySelected =
          parseInt(document.getElementById("difficultySelected").value) || 1;
        const difficultiesCount =
          parseInt(document.getElementById("difficultiesCount").value) || 1;
        const hardGenresCount =
          parseInt(document.getElementById("hardGenresCount").value) || 0;
        const scoreCritics =
          parseInt(document.getElementById("scoreCritics").value) || 75;
        const scoreUsers =
          parseInt(document.getElementById("scoreUsers").value) || 75;

        // Коэффициент сложности
        let difficultyMultiplier;
        if (difficultiesCount == 1) {
          difficultyMultiplier = 1;
        } else if (difficultiesCount == 2 && difficultySelected == 1) {
          difficultyMultiplier = 1;
        } else if (difficultiesCount == 2 && difficultySelected == 2) {
          difficultyMultiplier = 1.25;
        } else {
          difficultyMultiplier =
            0.85 +
            ((difficultySelected - 1) / (difficultiesCount - 1)) * (1.4 - 0.85);
        }

        // Модификация для коротких игр
        const timeFactor = 1 + Math.max(0, (5 - walkthroughTime) / 5); // 5 часовые игры

        // Формула для множителя оценки
        const ratingMultiplier =
          1 + (85 - (scoreCritics + scoreUsers) / 2) / 200;

        // Формула для сложных жанров
        const genreMultiplier = 1 + 0.2 * hardGenresCount;

        // Базовое значение
        const baseValue = 25;

        // Финальный расчёт
        const score =
          Math.pow(walkthroughTime, 1.2) *
            Math.pow(difficultyMultiplier + timeFactor, 1.4) *
            Math.pow(genreMultiplier, 1.4) *
            ratingMultiplier +
          baseValue;

        // Выводим результат
        document.getElementById(
          "result"
        ).textContent = `Очки за прохождение: ${score} = ${Math.ceil(score)}`;
      }
    </script>
  </head>

  <body>
    <form>
      <label for="input">Время прохождения:</label>
      <input
        style="width: 42px"
        type="number"
        min="0"
        id="walkthroughHours"
        name="walkthroughHours"
        value="1"
      />ч
      <input
        style="width: 42px"
        type="number"
        min="0"
        id="walkthroughMins"
        name="walkthroughMins"
        value="10"
      />м <br /><br />
      <label for="input">Количество сложностей:</label>
      <input
        style="width: 42px"
        type="number"
        min="1"
        id="difficultiesCount"
        name="difficultiesCount"
        value="1"
      />
      <label for="input">Выбранная сложность:</label>
      <input
        style="width: 42px"
        type="number"
        min="1"
        id="difficultySelected"
        name="difficultySelected"
        value="1"
      />
      <br /><br />
      <label for="input">Количество сложных жанров:</label>
      <input
        type="number"
        min="0"
        id="hardGenresCount"
        name="hardGenresCount"
        value="0"
      />
      <br /><br />
      <label for="input">Оценка критиков:</label>
      <input
        type="number"
        min="1"
        max="100"
        id="scoreCritics"
        name="scoreCritics"
        value="75"
      />
      <label for="input">Оценка юзеров:</label>
      <input
        type="number"
        min="1"
        max="100"
        id="scoreUsers"
        name="scoreUsers"
        value="75"
      />
      <br /><br />
      <button type="button" onclick="calculateScore()">Посчитать!</button>
      <b><label id="result"></label></b>
    </form>
  </body>
</html>
